# ChatGPT API 설정 가이드

이 가이드는 투어 관리 시스템에서 ChatGPT API를 사용하여 상품, 번역 등 사이트 페이지의 입력폼에 GPT로 추천 입력을 받는 기능을 설정하는 방법을 설명합니다.

## 🚀 기능 개요

ChatGPT API를 사용하여 다음과 같은 추천 기능을 제공합니다:

### 📝 상품 세부정보
- **투어 설명 추천**: 상품 제목을 바탕으로 매력적인 투어 설명 생성

### 🗓️ 투어 스케줄
- **일정 제목 추천**: 일차와 위치를 바탕으로 간결한 일정 제목 생성
- **일정 설명 추천**: 제목과 위치를 바탕으로 상세한 일정 설명 생성

### 🏨 픽업 호텔
- **호텔 설명 추천**: 호텔명과 위치를 바탕으로 매력적인 호텔 설명 생성

### ❓ FAQ
- **질문 추천**: 상품 주제를 바탕으로 자주 묻는 질문 생성
- **답변 추천**: 질문을 바탕으로 정확하고 도움이 되는 답변 생성

## 🔧 설정 방법

### 1. OpenAI API 키 발급

1. [OpenAI 웹사이트](https://platform.openai.com/)에 접속
2. 계정 생성 또는 로그인
3. API Keys 섹션으로 이동
4. "Create new secret key" 클릭
5. API 키 생성 및 복사 (한 번만 표시되므로 안전하게 보관)

### 2. 환경변수 설정

프로젝트 루트에 `.env.local` 파일을 생성하고 다음 내용을 추가:

```bash
# ChatGPT API 설정
NEXT_PUBLIC_OPENAI_API_KEY=your_openai_api_key_here
```

**중요**: 
- `NEXT_PUBLIC_OPENAI_API_KEY`는 클라이언트 사이드에서 사용되므로 공개됩니다
- 실제 운영 환경에서는 서버 사이드에서 API 호출을 처리하는 것을 권장합니다
- API 키는 절대 공개 저장소에 커밋하지 마세요

### 3. API 키 보안

#### 개발 환경
```bash
# .env.local (프로젝트 루트)
NEXT_PUBLIC_OPENAI_API_KEY=sk-your-actual-api-key-here
```

#### 운영 환경 (Vercel)
1. Vercel 대시보드에서 프로젝트 선택
2. Settings → Environment Variables
3. `NEXT_PUBLIC_OPENAI_API_KEY` 추가
4. 값 입력 후 Save

## 💰 비용 관리

### API 사용량 모니터링
- OpenAI 대시보드에서 사용량 확인
- 월별 사용 한도 설정 권장
- 필요에 따라 사용량 알림 설정

### 비용 최적화 팁
- `max_tokens` 파라미터를 적절히 설정 (기본값: 500)
- `temperature` 파라미터 조정 (기본값: 0.7)
- 불필요한 API 호출 방지

### 할당량 관리
- **월별 한도 설정**: OpenAI 대시보드에서 적절한 한도 설정
- **사용량 알림**: 한도 도달 시 이메일 알림 설정
- **Pay-as-you-go**: 사용량에 따른 자동 결제 설정
- **크레딧 충전**: 필요시 추가 크레딧 구매

## 🎯 사용 방법

### 상품 세부정보
1. 상품 편집 페이지에서 "세부정보" 탭 선택
2. "AI 추천" 버튼 클릭
3. ChatGPT가 생성한 설명 확인 및 수정

### 투어 스케줄
1. "투어 스케줄" 탭에서 테이블 형식 일정 추가
2. 헤더의 "AI 추천" 버튼으로 전체 일정 추천
3. 개별 행의 ✨ 버튼으로 특정 일정만 추천

### 픽업 호텔
1. 픽업 호텔 관리 페이지에서 호텔 추가/수정
2. "AI 추천" 버튼 클릭
3. ChatGPT가 생성한 호텔 설명 확인 및 수정

### FAQ
1. 상품 편집 페이지에서 "FAQ" 탭 선택
2. 헤더의 "AI 추천" 버튼으로 전체 FAQ 추천
3. 개별 FAQ 추가 시 ✨ 버튼으로 질문/답변 추천

## 🔍 문제 해결

### 일반적인 오류

#### 1. API 키 오류
```
OpenAI API 키가 설정되지 않았습니다.
```
**해결방법**: `.env.local` 파일에 올바른 API 키 설정

#### 2. 권한 오류
```
OpenAI API 오류: Invalid API key
```
**해결방법**: API 키가 올바른지 확인하고 OpenAI 계정 상태 확인

#### 3. 할당량 초과
```
OpenAI API 사용 한도를 초과했습니다.
```
**해결방법**: 
- OpenAI 대시보드에서 월별 한도 증가
- 결제 정보 확인 및 업데이트
- Pay-as-you-go 플랜으로 변경
- 추가 크레딧 구매

#### 4. Rate Limit 초과
```
OpenAI API 오류: Rate limit exceeded
```
**해결방법**: 잠시 후 다시 시도하거나 OpenAI 계정의 사용 한도 확인

#### 5. 네트워크 오류
```
ChatGPT 추천 중 오류가 발생했습니다.
```
**해결방법**: 인터넷 연결 확인 및 OpenAI 서비스 상태 확인

### 디버깅 팁

1. **브라우저 개발자 도구**에서 네트워크 탭 확인
2. **콘솔 로그**에서 상세 오류 메시지 확인
3. **OpenAI 대시보드**에서 API 사용량 및 오류 로그 확인

## 📚 추가 리소스

- [OpenAI API 문서](https://platform.openai.com/docs/api-reference)
- [ChatGPT API 가이드](https://platform.openai.com/docs/guides/gpt)
- [OpenAI 사용량 및 비용 관리](https://platform.openai.com/docs/guides/rate-limits)

## ⚠️ 주의사항

1. **API 키 보안**: 절대 공개 저장소에 커밋하지 마세요
2. **비용 관리**: 사용량을 정기적으로 모니터링하세요
3. **데이터 품질**: ChatGPT 추천 결과는 참고용이며, 필요시 수정이 필요합니다
4. **서비스 의존성**: OpenAI 서비스 장애 시 기능이 일시적으로 중단될 수 있습니다

## 🆘 지원

문제가 지속되면 다음을 확인해주세요:
1. API 키가 올바르게 설정되었는지
2. OpenAI 계정에 충분한 크레딧이 있는지
3. 네트워크 연결이 안정적인지
4. 브라우저 콘솔에 오류 메시지가 있는지
