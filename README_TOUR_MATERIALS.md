# 투어 자료 관리 시스템

투어 가이드가 사용할 수 있는 자료들을 체계적으로 관리하는 시스템입니다.

## 주요 기능

### 관리자 기능
1. **투어 자료 관리**
   - 가이드 스크립트 업로드 (PDF, TXT, DOC 등)
   - 나레이션 오디오 파일 업로드 (MP3, WAV 등)
   - 영상 자료 업로드 (MP4, AVI 등)
   - 이미지 자료 업로드 (JPG, PNG 등)

2. **가이드 퀴즈 관리**
   - 관광지별 퀴즈 문제 생성
   - 객관식 문제 지원 (2-6개 선택지)
   - 난이도 설정 (쉬움/보통/어려움)
   - 정답 설명 추가

3. **관광지 관리**
   - 관광지 정보 등록 및 수정
   - 한국어/영어 이름 지원
   - 카테고리 분류 (문화재, 자연, 체험 등)
   - 평균 체류 시간 설정

### 가이드 기능
1. **투어 자료 조회**
   - 관광지별로 그룹화된 자료 목록
   - 파일 타입별 아이콘 표시
   - 파일 크기 및 재생 시간 표시
   - 언어별 필터링

2. **미디어 재생**
   - 오디오 파일 재생/일시정지
   - 영상 파일 재생/일시정지
   - 파일 다운로드

3. **퀴즈 풀이**
   - 관광지별 퀴즈 문제 풀이
   - 정답 확인 및 설명 표시
   - 퀴즈 결과 기록

## 설치 및 설정

### 1. 데이터베이스 스키마 생성
```sql
-- 데이터베이스 테이블 생성
\i create_tour_materials_schema.sql

-- 스토리지 버킷 생성
\i create_tour_materials_storage.sql
```

### 2. 환경 설정
- Supabase 프로젝트 설정
- 스토리지 버킷 권한 설정
- RLS 정책 활성화

### 3. 파일 업로드 제한
- 최대 파일 크기: 100MB
- 지원 형식:
  - 문서: PDF, TXT, DOC, DOCX
  - 오디오: MP3, WAV
  - 영상: MP4, AVI, MOV
  - 이미지: JPG, PNG, GIF, WEBP

## 사용법

### 관리자 페이지 접근
1. 관리자 계정으로 로그인
2. 사이드바에서 "투어 자료 관리" 클릭
3. 자료 업로드, 퀴즈 생성, 관광지 관리 수행

### 가이드 페이지 접근
1. 가이드 계정으로 로그인
2. 하단 푸터에서 "투어자료" 클릭
3. 관광지별 자료 조회 및 사용

## 데이터베이스 구조

### 주요 테이블
- `tour_attractions`: 관광지 정보
- `tour_material_categories`: 자료 카테고리
- `tour_materials`: 투어 자료 메타데이터
- `guide_quizzes`: 가이드 퀴즈
- `guide_quiz_results`: 퀴즈 결과

### 스토리지 구조
- 버킷: `tour-materials`
- 경로: `tour-materials/{timestamp}-{random}.{ext}`

## 권한 설정

### 관리자 권한
- 모든 자료 업로드/수정/삭제
- 퀴즈 생성/수정/삭제
- 관광지 정보 관리

### 가이드 권한
- 공개된 자료 조회
- 파일 다운로드
- 퀴즈 풀이

## 기술 스택

- **Frontend**: Next.js 15, React 19, TypeScript
- **Backend**: Supabase (PostgreSQL, Storage)
- **UI**: Tailwind CSS, Lucide React
- **State Management**: React Hooks
- **File Upload**: Supabase Storage API

## 주의사항

1. **파일 크기 제한**: 업로드 시 100MB 제한 확인
2. **권한 관리**: 관리자만 자료 업로드 가능
3. **데이터 백업**: 정기적인 데이터베이스 백업 권장
4. **스토리지 용량**: 스토리지 사용량 모니터링 필요

## 문제 해결

### 파일 업로드 실패
- 파일 크기 확인 (100MB 이하)
- 지원 형식 확인
- 네트워크 연결 상태 확인

### 권한 오류
- 사용자 역할 확인
- RLS 정책 확인
- 스토리지 권한 설정 확인

### 데이터 로드 실패
- 데이터베이스 연결 상태 확인
- 테이블 존재 여부 확인
- RLS 정책 확인

## 업데이트 내역

### v1.0.0 (2024-01-XX)
- 초기 버전 릴리스
- 기본 투어 자료 관리 기능
- 가이드 퀴즈 시스템
- 관광지 관리 기능
- 파일 업로드/다운로드 기능
